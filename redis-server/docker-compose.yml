version: '3'
services:
  redis:
    image: redis
    ports:
      - 6379:6379/tcp 
    container_name: redis
    volumes:
      - ./redis.conf:/usr/local/etc/redis/redis.conf
    command: redis-server /usr/local/etc/redis/redis.conf

  redis-admin:
    container_name: redis-admin
    build: ./redis-admin
    image: redis-commander  
    links: 
      - redis
    ports:
      - 8081:8081/tcp
    environment:
      - redishost=redis
      - redispassword=foobared
    command: sh -c "/usr/local/bin/redis-commander --redis-host $$redishost --redis-password $$redispassword" 